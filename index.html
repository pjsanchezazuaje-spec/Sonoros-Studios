<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sonoros Studios - SB's Entertainment</title>
    <style>
        :root {
            /* Dise√±o Dorado Metal de Lujo */
            --gold-gradient: linear-gradient(145deg, #a67c00, #bf9b30, #ffcf40, #bf9b30, #a67c00);
            --bg-dark: #080808;
            --panel: #141414;
            --text-gold: #d4af37;
        }

        body {
            background-color: var(--bg-dark);
            color: white;
            font-family: 'Segoe UI', sans-serif;
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        /* --- ENCABEZADO --- */
        .top-bar {
            width: 100%;
            padding: 15px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-sizing: border-box;
            border-bottom: 1px solid #222;
        }

        .logo-text {
            background: var(--gold-gradient);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: 800;
            font-size: 18px;
            letter-spacing: 1px;
        }

        #clock { color: var(--text-gold); font-family: monospace; font-size: 16px; }

        /* --- REPRODUCTOR PRINCIPAL --- */
        .player-card {
            margin-top: 20px;
            width: 90%;
            max-width: 400px;
            background: var(--panel);
            border-radius: 40px;
            padding: 30px;
            border: 1px solid rgba(212, 175, 55, 0.15);
            box-shadow: 0 20px 50px rgba(0,0,0,0.7);
            text-align: center;
        }

        .cover-art {
            width: 220px;
            height: 220px;
            margin: 0 auto 20px;
            border-radius: 30px;
            background: #000;
            border: 3px solid #d4af37;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }
        
        .cover-art img { width: 100%; height: 100%; object-fit: cover; }

        h2 { font-size: 22px; margin: 10px 0 5px; color: var(--text-gold); }
        p { color: #777; font-size: 14px; margin-bottom: 20px; }

        /* --- CONTROLES --- */
        .progress-area { margin: 20px 0; }
        
        input[type="range"] {
            width: 100%;
            height: 4px;
            background: #333;
            border-radius: 2px;
            appearance: none;
            outline: none;
        }
        input[type="range"]::-webkit-slider-thumb {
            appearance: none;
            width: 15px; height: 15px;
            background: #d4af37;
            border-radius: 50%;
        }

        .controls {
            display: flex;
            justify-content: space-around;
            align-items: center;
            margin-top: 20px;
        }

        .btn { background: none; border: none; color: #fff; font-size: 24px; cursor: pointer; }
        
        .play-btn {
            width: 70px; height: 70px;
            background: var(--gold-gradient);
            border-radius: 50%;
            color: #000;
            font-size: 28px;
            display: flex; align-items: center; justify-content: center;
            box-shadow: 0 0 20px rgba(212, 175, 55, 0.3);
            border: none;
        }

        /* --- BOTONES EXTRA --- */
        .action-btn {
            display: block;
            width: 100%;
            padding: 12px;
            margin-top: 15px;
            background: transparent;
            border: 1px solid var(--text-gold);
            color: var(--text-gold);
            border-radius: 15px;
            font-weight: bold;
            font-size: 14px;
        }

        .file-upload {
            display: inline-block;
            background: #222;
            color: #ccc;
            padding: 8px 20px;
            border-radius: 20px;
            font-size: 12px;
            margin-bottom: 15px;
            border: 1px solid #444;
        }
    </style>
</head>
<body>

    <div class="top-bar">
        <div class="logo-text">SONOROS STUDIOS</div>
        <div id="clock">00:00:00</div>
    </div>

    <div class="player-card">
        <label for="file-input" class="file-upload">üìÇ Cargar M√∫sica Local</label>
        <div style="margin-top: 10px; display: flex; gap: 5px;">
    <input type="text" id="stream-url" placeholder="Pegar enlace (MP3/Radio)" 
           style="width: 70%; padding: 8px; border-radius: 10px; border: 1px solid #444; background: #222; color: white;">
    <button onclick="playStream()" 
            style="width: 30%; background: var(--text-gold); border: none; border-radius: 10px; color: black; font-weight: bold;">
        ‚ñ∂ WEB
    </button>
</div>
        <input type="file" id="file-input" multiple accept="audio/*" style="display:none">

        <div class="cover-art">
            <img src="https://ui-avatars.com/api/?name=S+B&background=000&color=d4af37&size=200&font-size=0.5" id="cover-img" alt="Cover">
        </div>

        <h2 id="track-name">Bienvenido</h2>
        <p id="artist-name">Sanchez Brothers Entertainment</p>

        <div class="progress-area">
            <input type="range" id="seek-slider" max="100" value="0">
            <div style="display:flex; justify-content:space-between; font-size:12px; color:#888; margin-top:5px;">
                <span id="current-time">0:00</span>
                <span id="duration">0:00</span>
            </div>
        </div>

        <div class="controls">
            <button class="btn" onclick="prevTrack()">‚èÆ</button>
            <button class="play-btn" id="play-pause-btn" onclick="playPause()">‚ñ∂</button>
            <button class="btn" onclick="nextTrack()">‚è≠</button>
        </div>

        <button class="action-btn" onclick="saveToFavorites()">‚ù§ Guardar en Favoritos</button>
        <button class="action-btn" onclick="testJingle()">üì¢ Probar Jingle</button>
    </div>

    <audio id="audio-player"></audio>

    <script type="module">
        // 1. Usamos las versiones WEB (CDN) que funcionan en el tel√©fono
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-analytics.js";
        import { getFirestore, doc, setDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        // 2. TUS DATOS REALES DE FIREBASE (Ya integrados)
        const firebaseConfig = {
          apiKey: "AIzaSyDPdelw8PBI-SpofkZ5XRQ-3LQnTygU2oY",
          authDomain: "sonoros-studios.firebaseapp.com",
          projectId: "sonoros-studios",
          storageBucket: "sonoros-studios.firebasestorage.app",
          messagingSenderId: "151838864086",
          appId: "1:151838864086:web:b57683414d389351d94f77",
          measurementId: "G-5PSPHN2LNT"
        };

        // Inicializamos Firebase
        const app = initializeApp(firebaseConfig);
        const analytics = getAnalytics(app); // Opcional
        const db = getFirestore(app);

        // Variables del Reproductor
        const audio = document.getElementById('audio-player');
        const playBtn = document.getElementById('play-pause-btn');
        const seekSlider = document.getElementById('seek-slider');
        const title = document.getElementById('track-name');
        
        let playlist = [];
        let trackIndex = 0;

        // --- RELOJ Y PROGRAMACI√ìN ---
        setInterval(() => {
            const now = new Date();
            const timeString = now.toLocaleTimeString('en-GB'); // Formato 24h
            document.getElementById('clock').innerText = timeString;

            // EJEMPLO DE PROGRAMACI√ìN: A las 12:00:00 suena un jingle
            if(timeString === "12:00:00") {
                alert("¬°Hora del Jingle Programado!");
                // Aqu√≠ podr√≠as pausar y reproducir otro audio
            }
        }, 1000);

        // --- CARGAR M√öSICA LOCAL ---
        document.getElementById('file-input').addEventListener('change', (e) => {
            const files = Array.from(e.target.files);
            if(files.length > 0) {
                playlist = files.map(file => ({
                    name: file.name.replace('.mp3', ''),
                    url: URL.createObjectURL(file)
                }));
                loadTrack(0);
            }
        });

        function loadTrack(index) {
            trackIndex = index;
            audio.src = playlist[trackIndex].url;
            title.innerText = playlist[trackIndex].name;
            audio.load();
            playPause();
        }

        // --- CONTROLES ---
        window.playPause = () => {
            if(audio.paused) {
                audio.play();
                playBtn.innerText = "‚è∏";
            } else {
                audio.pause();
                playBtn.innerText = "‚ñ∂";
            }
        };

        window.nextTrack = () => {
            if(playlist.length > 0) {
                trackIndex = (trackIndex + 1) % playlist.length;
                loadTrack(trackIndex);
            }
        };

        window.prevTrack = () => {
            if(playlist.length > 0) {
                trackIndex = (trackIndex - 1 + playlist.length) % playlist.length;
                loadTrack(trackIndex);
            }
        };

        // Barra de progreso
        audio.addEventListener('timeupdate', () => {
            const val = (audio.currentTime / audio.duration) * 100;
            seekSlider.value = val || 0;
            document.getElementById('current-time').innerText = formatTime(audio.currentTime);
            document.getElementById('duration').innerText = formatTime(audio.duration);
        });

        seekSlider.addEventListener('input', () => {
            audio.currentTime = (seekSlider.value / 100) * audio.duration;
        });

        function formatTime(s) {
            if(!s) return "0:00";
            let m = Math.floor(s/60);
            let sec = Math.floor(s%60);
            return m + ":" + (sec < 10 ? "0"+sec : sec);
        }

        // --- GUARDAR EN LA NUBE (FIREBASE) ---
        window.saveFavorite = async () => {
            if(playlist.length === 0) return alert("No hay canci√≥n sonando.");
            const songName = playlist[trackIndex].name;
            
            try {
                await setDoc(doc(db, "favoritos", songName), {
                    nombre: songName,
                    fecha: new Date(),
                    tienda: "Local Principal"
                });
                alert("‚òÖ Guardado en la nube de Sanchez Brothers");
            } catch (e) {
                alert("Error guardando: " + e.message);
            }
        };

        window.testJingle = () => {
            alert("Aqu√≠ sonar√° el jingle comercial.");
        }
// Funci√≥n para reproducir m√∫sica online
window.playStream = () => {
    const url = document.getElementById('stream-url').value;
    if(url) {
        audio.src = url;
        title.innerText = "Transmisi√≥n Online";
        document.getElementById('artist-name').innerText = "Streaming Sanchez Brothers";
        audio.play();
        playBtn.innerText = "‚è∏";
    } else {
        alert("Por favor pega un enlace v√°lido primero.");
    }
};

    </script>
</body>
</html>
  
